jobs:
  include:
    - name: macOS / Swift 4.2.1
      os: osx
      osx_image: xcode10.1
      language: swift
      xcode_project: TrackedValue.xcodeproj
      xcode_scheme: TrackedValue-Package
      script: swift test --parallel

    - name: macOS / Swift 5.0
      os: osx
      osx_image: xcode10.2
      language: swift
      xcode_project: TrackedValue.xcodeproj
      xcode_scheme: TrackedValue-Package
      script: swift test --parallel

    - name: iOS / Swift 4.2.1
      os: osx
      osx_image: xcode10.1
      language: swift
      xcode_project: TrackedValue.xcodeproj
      xcode_scheme: TrackedValue-Package
      xcode_destination: platform=iOS Simulator,OS=latest,name=iPhone XS
      before_install: swift package generate-xcodeproj --enable-code-coverage
      after_success: bash <(curl -s https://codecov.io/bash)

    - name: Linux / Swift 4.2.1
      os: linux
      language: generic
      env: SWIFT_VERSION=4.2.1
      install: eval "$(curl -sL https://swiftenv.fuller.li/install.sh)"
      script: swift test --parallel
    
    - name: Linux / Swift 5.0
      os: linux
      language: generic
      env: SWIFT_VERSION=5.0
      install: eval "$(curl -sL https://swiftenv.fuller.li/install.sh)"
      script: swift test --parallel
